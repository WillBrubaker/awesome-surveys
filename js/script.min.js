jQuery(document).ready(function(b){b("form.answer-survey label.control-label > span.required").each(function(){var c=b(this).parent().next();b('input[type="checkbox"]',c).each(function(){b(this).prop("required",true)})});var a=b("form.answer-survey").position();b('form.answer-survey input[type="submit"]').prop("disabled",false);b("form.answer-survey").each(function(){b(this).validate({errorPlacement:function(c,d){var e=d.closest(b(".control-group"));var f=b("> label",e);c.insertBefore(f)},submitHandler:function(d){var c=b(".overlay",d);c.show();b.post(wwm_awesome_surveys.ajaxurl,b(d).serializeArray(),function(e){if(null==e){b(d).empty().append('<p class="error">An unknown error occured (data object is null)</p>');return null}msg=("undefined"!=typeof e.data.thank_you)?e.data.thank_you:'<span class="error">'+e.data+"</span>";b(d).empty().append("<p>"+msg+"</p>");if(null!=e.data.url){window.location=e.data.url}},"json").fail(function(e){b(d).empty().append('<p class="error">There was an error. The error status code is: '+e.status+" The error message is: "+e.statusText+"</p>")}).always(function(){window.scroll(a.left,-a.top);c.hide()})}})});b("form.answer-survey textarea[data-rule-maxlength][data-add_countdown]").each(function(){maxLength=b(this).data("rule-maxlength");if("undefined"!=typeof maxLength){b('<div class="countdown"><span class="remaining-chars">'+maxLength+"</span> "+wwm_awesome_surveys.countDownMessage+"</div>").insertAfter(b(this))}}).keyup(function(){maxLength=b(this).data("rule-maxlength");curLength=b(this).val().length;remaining=maxLength-curLength;b(".remaining-chars",b(this).parent()).empty().append(remaining)})});